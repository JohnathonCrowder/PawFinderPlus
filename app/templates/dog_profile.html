{% extends "base.html" %}

{% block title %}{{ dog.name }}'s Profile - DogBreederPlus{% endblock %}

{% block head %}
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
    body {
        font-family: 'Inter', sans-serif;
        background-color: #f0f2f5;
    }
    .dog-header {
        background-image: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        position: relative;
        overflow: hidden;
    }
    .dog-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('https://images.unsplash.com/photo-1568572933382-74d440642117?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80') no-repeat center center;
        background-size: cover;
        opacity: 0.2;
        z-index: 0;
    }
    .dog-header-content {
        position: relative;
        z-index: 1;
    }
    .image-gallery {
        background-color: #000;
    }
    .thumbnail {
        opacity: 0.6;
        transition: all 0.3s ease;
    }
    .thumbnail:hover, .thumbnail.active {
        opacity: 1;
        transform: scale(1.05);
    }
    .info-card {
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
    }
    .info-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
    }
    .stat-item {
        transition: all 0.3s ease;
    }
    .stat-item:hover {
        transform: translateY(-3px);
    }
    .family-tree-btn {
        background-image: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
    }
    .family-tree-btn:hover {
        background-image: linear-gradient(135deg, #66c88a 0%, #5cacce 100%);
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen pb-12">
    <!-- Dog Header -->
    <div class="dog-header text-white py-24">
        <div class="container mx-auto px-4 dog-header-content">
            <h1 class="text-5xl font-bold mb-2 shadow-text">{{ dog.name }}</h1>
            <p class="text-2xl mb-4 shadow-text">{{ dog.breed }}</p>
            <div class="flex items-center space-x-4">
                <span class="bg-white text-purple-600 text-sm font-medium px-3 py-1 rounded-full">
                    {{ dog.gender }}
                </span>
                <span class="bg-white text-blue-600 text-sm font-medium px-3 py-1 rounded-full">
                    {{ (date.today() - dog.date_of_birth).days // 365 }} years old
                </span>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4 -mt-16">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Image Gallery -->
            <div class="lg:col-span-2">
                <div class="image-gallery rounded-lg overflow-hidden shadow-lg bg-white">
                    <div class="relative aspect-w-16 aspect-h-9">
                        {% if dog.images and dog.images[0] %}
                            <img id="mainImage" src="{{ url_for('get_dog_image', image_id=dog.images[0].id) }}" 
                                 alt="{{ dog.name }}" 
                                 class="w-full h-full object-cover">
                        {% else %}
                            <div class="w-full h-full flex items-center justify-center bg-gray-200">
                                <i class="fas fa-paw text-7xl text-gray-400"></i>
                            </div>
                        {% endif %}
                    </div>
                    {% if dog.images|length > 1 %}
                        <div class="p-4 flex justify-center space-x-2 overflow-x-auto">
                            {% for image in dog.images %}
                                <button onclick="changeMainImage('{{ url_for('get_dog_image', image_id=image.id) }}', this)" 
                                        class="thumbnail flex-shrink-0 w-16 h-16 rounded-md overflow-hidden focus:outline-none focus:ring-2 focus:ring-blue-500 {% if loop.first %}active{% endif %}">
                                    <img src="{{ url_for('get_dog_image', image_id=image.id) }}" 
                                         alt="{{ dog.name }}" 
                                         class="w-full h-full object-cover">
                                </button>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Dog Info -->
            <div class="lg:col-span-1 space-y-8">
                <div class="info-card p-6">
                    <h2 class="text-2xl font-semibold mb-4">Quick Stats</h2>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="stat-item text-center p-3 bg-blue-50 rounded-lg">
                            <i class="fas fa-birthday-cake text-2xl text-blue-500 mb-2"></i>
                            <p class="text-sm text-gray-600">Born</p>
                            <p class="font-semibold">{{ dog.date_of_birth.strftime('%b %d, %Y') }}</p>
                        </div>
                        <div class="stat-item text-center p-3 bg-green-50 rounded-lg">
                            <i class="fas fa-weight text-2xl text-green-500 mb-2"></i>
                            <p class="text-sm text-gray-600">Weight</p>
                            <p class="font-semibold">{{ dog.weight }} kg</p>
                        </div>
                        <div class="stat-item text-center p-3 bg-purple-50 rounded-lg">
                            <i class="fas fa-palette text-2xl text-purple-500 mb-2"></i>
                            <p class="text-sm text-gray-600">Color</p>
                            <p class="font-semibold">{{ dog.color }}</p>
                        </div>
                        <div class="stat-item text-center p-3 bg-yellow-50 rounded-lg">
                            <i class="fas fa-venus-mars text-2xl text-yellow-500 mb-2"></i>
                            <p class="text-sm text-gray-600">Gender</p>
                            <p class="font-semibold">{{ dog.gender }}</p>
                        </div>
                    </div>
                </div>

                <div class="info-card p-6">
                    <h2 class="text-2xl font-semibold mb-4">About {{ dog.name }}</h2>
                    <p class="text-gray-600 mb-4">
                        {{ dog.name }} is a beautiful {{ dog.breed }} born on {{ dog.date_of_birth.strftime('%B %d, %Y') }}. 
                        {% if dog.color %}
                        With a stunning {{ dog.color }} coat, 
                        {% endif %}
                        {{ dog.name }} has been bringing joy and companionship to our family for 
                        {{ (date.today() - dog.date_of_birth).days // 365 }} years and 
                        {{ ((date.today() - dog.date_of_birth).days % 365) // 30 }} months.
                    </p>
                </div>

                <div class="info-card p-6">
                    <h2 class="text-2xl font-semibold mb-4">Family Tree</h2>
                    <p class="text-gray-600 mb-4">Discover {{ dog.name }}'s lineage and explore the family connections.</p>
                    <a href="{{ url_for('dog_family_tree', id=dog.id) }}" 
                       class="family-tree-btn inline-block w-full text-white text-center px-4 py-3 rounded-full transition duration-300 shadow-md hover:shadow-lg">
                        <i class="fas fa-tree mr-2"></i>Explore Family Tree
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function changeMainImage(src, thumbnail) {
    const mainImage = document.getElementById('mainImage');
    mainImage.src = src;
    document.querySelectorAll('.thumbnail').forEach(thumb => thumb.classList.remove('active'));
    thumbnail.classList.add('active');
}
</script>
{% endblock %}